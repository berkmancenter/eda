<% provide :title, @image_set.name %>
<% provide :view_classes, 'side-by-side' %>

<% cache @image_set do %>
  <h2><%= @image_set.name %></h2>

  <noscript>
      <% @image_set.all_images.each do |image| %>
          <div class="own-size" style="width: <%= image.web_width %>px; height: <%= image.web_height %>px;">
              <% if page = @edition.image_set.leaves_containing(image).first %>
                  <%= link_to image_tag(preview_url(image), height: 600), edition_image_set_path(@edition, page) %>
              <% else %>
                  <%= image_tag preview_url(image) %>
              <% end %>
          </div>
      <% end %>
  </noscript>

  <script>
      var images = [
      <% @image_set.all_images.each do |image| %>
          {
              imageFilename: "<%= image.url %>",
              <% if page = @edition.image_set.leaves_containing(image).first %>
                  linkUrl: "<%= edition_image_set_path(@edition, page) %>"
              <% else %>
                  linkUrl: ""
              <% end %>
          },
      <% end %>
      ];
      var numberOfPages = images.length;
  </script>

  <div class="sbs-pages"></div>
  <div class="page-links">
      <div class="left-image-link">&nbsp;</div>
      <div class="right-image-link">&nbsp;</div>
  </div>
  <div class="page-controls">
      <div class="previous-page-container"><a class="change-page" href="javascript:void(0);" id="previous-page" title="Previous Page"></a></div>
      <div class="page-counter"><span class="current-page-number"></span> / <span class="total-pages"></span></div>
      <div class="next-page-container"><a class="change-page" href="javascript:void(0);" id="next-page" title="Next Page"></a></div>
  </div>
<% end %>
